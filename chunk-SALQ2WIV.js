import{b as O}from"./chunk-LDM4CUVJ.js";import{a as D,b as f,c as I,d as V,h as B,i as M,j as k,k as $,m as j}from"./chunk-AAXMUW5Q.js";import"./chunk-CNHRRE5V.js";import{Ab as A,Ea as q,Fa as w,I as P,K as N,Na as a,Oa as F,Ua as x,Xa as y,ca as s,ib as L,na as c,pa as h,ta as m,xa as n,ya as r,za as C}from"./chunk-QGTKXM7V.js";var R=(t,i)=>({"is-valid":t,"is-invalid":i});function z(t,i){t&1&&(n(0,"p",19),a(1,"Name Is Required"),r())}function H(t,i){t&1&&(n(0,"p",19),a(1,"Name Should be more than or equal 3 chars"),r())}function J(t,i){t&1&&(n(0,"p",19),a(1,"Name Should be less than or equal 20 chars"),r())}function K(t,i){if(t&1&&(n(0,"div",6),c(1,z,2,0,"p",19)(2,H,2,0)(3,J,2,0),r()),t&2){let l,o=w();s(),m(1,(l=o.registerGroup.get("name"))!=null&&l.getError("required")?1:(l=o.registerGroup.get("name"))!=null&&l.getError("minlength")?2:(l=o.registerGroup.get("name"))!=null&&l.getError("maxlength")?3:-1)}}function Q(t,i){t&1&&(n(0,"p",19),a(1,"Email Is Required"),r())}function U(t,i){t&1&&(n(0,"p",19),a(1,"Enter Valid Email "),r())}function W(t,i){if(t&1&&(n(0,"div",6),c(1,Q,2,0,"p",19)(2,U,2,0),r()),t&2){let l,o=w();s(),m(1,(l=o.registerGroup.get("email"))!=null&&l.getError("required")?1:(l=o.registerGroup.get("email"))!=null&&l.getError("email")?2:-1)}}function X(t,i){t&1&&(n(0,"p",19),a(1,"PhoneIs Required"),r())}function Y(t,i){t&1&&(n(0,"p",19),a(1,"Eaccept only egypt phone numbers "),r())}function Z(t,i){if(t&1&&(n(0,"div",6),c(1,X,2,0,"p",19)(2,Y,2,0),r()),t&2){let l,o=w();s(),m(1,(l=o.registerGroup.get("phone"))!=null&&l.getError("required")?1:(l=o.registerGroup.get("phone"))!=null&&l.getError("pattern")?2:-1)}}function ee(t,i){t&1&&(n(0,"p",19),a(1,"password Is Required"),r())}function te(t,i){t&1&&(n(0,"p",19),a(1,"password must start with upperCase then from 6 to more any chars "),r())}function re(t,i){if(t&1&&(n(0,"div",6),c(1,ee,2,0,"p",19)(2,te,2,0),r()),t&2){let l,o=w();s(),m(1,(l=o.registerGroup.get("password"))!=null&&l.getError("required")?1:(l=o.registerGroup.get("password"))!=null&&l.getError("pattern")?2:-1)}}function ne(t,i){t&1&&(n(0,"p",15),a(1,"Password confirmation is incorrect"),r())}function ie(t,i){t&1&&(n(0,"span"),C(1,"i",20),r())}function le(t,i){if(t&1&&(n(0,"p",17),a(1),r()),t&2){let l=w();s(),F(l.msgError)}}function oe(t,i){t&1&&(n(0,"p",18),a(1,"Success...waiting 2s"),r())}var ce=(()=>{let i=class i{constructor(){this._AuthService=P(O),this._FormBuilder=P($),this._Router=P(A),this.msgError="",this.isLoading=!1,this.msgSuccess=!1,this.registerGroup=this._FormBuilder.group({name:[null,[f.required,f.minLength(3),f.maxLength(20)]],email:[null,[f.required,f.email]],password:[null,[f.required,f.pattern(/^\w{6,}$/)]],rePassword:[null],phone:[null,[f.required,f.pattern(/^01[0125][0-9]{8}$/)]]},{validators:this.confirmPassword})}regiterSubmit(){this.registerGroup.valid?(this.isLoading=!0,this.registerSub=this._AuthService.setRegisterForm(this.registerGroup.value).subscribe({next:o=>{console.log(o),o.message=="success"&&(this.msgSuccess=!0,setTimeout(()=>{this._Router.navigate(["/login"])},2e3)),this.isLoading=!1},error:o=>{this.msgError=o.error.message,console.log(o),this.isLoading=!1}})):(this.registerGroup.setErrors({mismatch:!0}),this.registerGroup.markAllAsTouched())}ngOnDestroy(){this.registerSub?.unsubscribe()}confirmPassword(o){return o.get("password")?.value===o.get("rePassword")?.value?null:{mismatch:!0}}};i.\u0275fac=function(b){return new(b||i)},i.\u0275cmp=N({type:i,selectors:[["app-register"]],standalone:!0,features:[x],decls:34,vars:29,consts:[[1,"bg-main-light","shadow","p-2","my-3","rounded-4"],[1,"h2","text-main"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","name"],["id","name","type","text","formControlName","name",1,"form-control",3,"ngClass"],[1,"alert","alert-danger","w-50"],["for","email"],["id","email","type","email","formControlName","email",1,"form-control",3,"ngClass"],["for","phone"],["id","phone","type","tel","formControlName","phone",1,"form-control",3,"ngClass"],["for","pass"],["id","pass","type","password","formControlName","password",1,"form-control",3,"ngClass"],["for","repass"],["id","repass","type","password","formControlName","rePassword",1,"form-control",3,"ngClass"],[1,"alert","alert-danger","m-0","w-50"],[1,"btn-main","ms-auto","d-block"],[1,"alert","alert-danger"],[1,"text-center","my-2","alert","alert-success"],[1,"m-0"],[1,"fa","fa-spinner","fa-spin"]],template:function(b,e){if(b&1&&(n(0,"section",0)(1,"h1",1),a(2,"Register Now:"),r(),n(3,"form",2),q("ngSubmit",function(){return e.regiterSubmit()}),n(4,"div",3)(5,"label",4),a(6,"name"),r(),C(7,"input",5),c(8,K,4,1,"div",6),r(),n(9,"div",3)(10,"label",7),a(11,"email"),r(),C(12,"input",8),c(13,W,3,1,"div",6),r(),n(14,"div",3)(15,"label",9),a(16,"phone"),r(),C(17,"input",10),c(18,Z,3,1,"div",6),r(),n(19,"div",3)(20,"label",11),a(21,"password"),r(),C(22,"input",12),c(23,re,3,1,"div",6),r(),n(24,"div",3)(25,"label",13),a(26,"rePassword"),r(),C(27,"input",14),c(28,ne,2,0,"p",15),r(),n(29,"button",16),a(30,"Register "),c(31,ie,2,0,"span"),r(),c(32,le,2,1,"p",17)(33,oe,2,0,"p",18),r()()),b&2){let u,G,p,v,d,E,g,S,_,T;s(3),h("formGroup",e.registerGroup),s(4),h("ngClass",y(14,R,!((u=e.registerGroup.get("name"))!=null&&u.errors)&&(((u=e.registerGroup.get("name"))==null?null:u.touched)||((u=e.registerGroup.get("name"))==null?null:u.dirty)),((u=e.registerGroup.get("name"))==null?null:u.errors)&&(((u=e.registerGroup.get("name"))==null?null:u.touched)||((u=e.registerGroup.get("name"))==null?null:u.dirty)))),s(),m(8,(G=e.registerGroup.get("name"))!=null&&G.errors&&((G=e.registerGroup.get("name"))!=null&&G.touched||(G=e.registerGroup.get("name"))!=null&&G.dirty)?8:-1),s(4),h("ngClass",y(17,R,!((p=e.registerGroup.get("email"))!=null&&p.errors)&&(((p=e.registerGroup.get("email"))==null?null:p.touched)||((p=e.registerGroup.get("email"))==null?null:p.dirty)),((p=e.registerGroup.get("email"))==null?null:p.errors)&&(((p=e.registerGroup.get("email"))==null?null:p.touched)||((p=e.registerGroup.get("email"))==null?null:p.dirty)))),s(),m(13,(v=e.registerGroup.get("email"))!=null&&v.errors&&((v=e.registerGroup.get("email"))!=null&&v.touched||(v=e.registerGroup.get("email"))!=null&&v.dirty)?13:-1),s(4),h("ngClass",y(20,R,!((d=e.registerGroup.get("phone"))!=null&&d.errors)&&(((d=e.registerGroup.get("phone"))==null?null:d.touched)||((d=e.registerGroup.get("phone"))==null?null:d.dirty)),((d=e.registerGroup.get("phone"))==null?null:d.errors)&&(((d=e.registerGroup.get("phone"))==null?null:d.touched)||((d=e.registerGroup.get("phone"))==null?null:d.dirty)))),s(),m(18,(E=e.registerGroup.get("phone"))!=null&&E.errors&&((E=e.registerGroup.get("phone"))!=null&&E.touched||(E=e.registerGroup.get("phone"))!=null&&E.dirty)?18:-1),s(4),h("ngClass",y(23,R,!((g=e.registerGroup.get("password"))!=null&&g.errors)&&(((g=e.registerGroup.get("password"))==null?null:g.touched)||((g=e.registerGroup.get("password"))==null?null:g.dirty)),((g=e.registerGroup.get("password"))==null?null:g.errors)&&(((g=e.registerGroup.get("password"))==null?null:g.touched)||((g=e.registerGroup.get("password"))==null?null:g.dirty)))),s(),m(23,(S=e.registerGroup.get("password"))!=null&&S.errors&&((S=e.registerGroup.get("password"))!=null&&S.touched||(S=e.registerGroup.get("password"))!=null&&S.dirty)?23:-1),s(4),h("ngClass",y(26,R,!((_=e.registerGroup.get("rePassword"))!=null&&_.errors)&&(((_=e.registerGroup.get("rePassword"))==null?null:_.touched)||((_=e.registerGroup.get("rePassword"))==null?null:_.dirty)),((_=e.registerGroup.get("rePassword"))==null?null:_.errors)&&(((_=e.registerGroup.get("rePassword"))==null?null:_.touched)||((_=e.registerGroup.get("rePassword"))==null?null:_.dirty)))),s(),m(28,e.registerGroup.getError("mismatch")&&((T=e.registerGroup.get("rePassword"))!=null&&T.touched||(T=e.registerGroup.get("rePassword"))!=null&&T.dirty)?28:-1),s(3),m(31,e.isLoading?31:-1),s(),m(32,e.msgError?32:-1),s(),m(33,e.msgSuccess?33:-1)}},dependencies:[L,j,B,D,I,V,M,k]});let t=i;return t})();export{ce as RegisterComponent};
