<section>
  <h1 class="text-main text-center my-2">Forget Password</h1>
@if (step == 1) {
  <form [formGroup]=" verifyEmail" class="bg-main-light p-3 shadow rounded-4 " (ngSubmit)="step1()">
    <div class="my-2">
      <label for="email">Email </label>
      <input [ngClass]="{
        'is-valid':! verifyEmail.get('email')?.errors && ( verifyEmail.get('email')?.touched ||  verifyEmail.get('email')?.dirty),
        'is-invalid':  verifyEmail.get('email')?.errors && ( verifyEmail.get('email')?.touched ||  verifyEmail.get('email')?.dirty),
      }"
      formControlName="email" type="email" id="email" class="form-control" />
      @if ( verifyEmail.get('email')?.errors && ( verifyEmail.get('email')?.touched ||  verifyEmail.get('email')?.dirty)) {
        <div class="alert alert-danger w-50">
          @if ( verifyEmail.get('email')?.getError('required')) {
            <p class="m-0">Email Is Required</p>
          }
          @else if ( verifyEmail.get('email')?.getError('email')) {<p class="m-0">Enter Valid Email </p>}
        </div>
      }
    </div>
    <button [disabled]=" verifyEmail.invalid" class="btn-main">Verify Email
        @if (isLoading) {
      <span><i class="fa fa-spinner fa-spin"></i></span>
    }</button>
  </form>
}@else if (step == 2) {
  <form [formGroup]="verifyCode" class="bg-main-light p-3 shadow rounded-4" (ngSubmit)="step2()">
    <div class="my-2">
      <label for="code">reset Code </label>
      <input [ngClass]="{
        'is-valid':!verifyCode.get('resetCode')?.errors && (verifyCode.get('resetCode')?.touched || verifyCode.get('resetCode')?.dirty),
        'is-invalid': verifyCode.get('resetCode')?.errors && (verifyCode.get('resetCode')?.touched || verifyCode.get('resetCode')?.dirty),
      }"
      formControlName="resetCode" type="text" id="code" class="form-control" />
      @if (verifyCode.get('resetCode')?.errors && (verifyCode.get('resetCode')?.touched || verifyCode.get('resetCode')?.dirty)) {
        <div class="alert alert-danger w-50">
          @if (verifyCode.get('resetCode')?.getError('required')) {
            <p class="m-0">Email Is Required</p>
          }
          @else if (verifyCode.get('resetCode')?.getError('pattern')) {<p class="m-0">Enter Valid code </p>}
        </div>
      }
    </div>
    <button [disabled]="verifyCode.invalid" class="btn-main">Verify code
      @if (isLoading) {
        <span><i class="fa fa-spinner fa-spin"></i></span>
      }
    </button>
  </form>
}@else if (step == 3) {
  <form [formGroup]="resetPassword" class="bg-main-light p-3 shadow rounded-4" (ngSubmit)="step3()">
    <div class="my-2">
      <label for="email">Email </label>
      <input readonly [ngClass]="{
        'is-valid':!resetPassword.get('email')?.errors && (resetPassword.get('email')?.touched || resetPassword.get('email')?.dirty),
        'is-invalid': resetPassword.get('email')?.errors && (resetPassword.get('email')?.touched || resetPassword.get('email')?.dirty),
      }"
      formControlName="email" type="email" id="email" class="form-control" />
      @if (resetPassword.get('email')?.errors && (resetPassword.get('email')?.touched || resetPassword.get('email')?.dirty)) {
        <div class="alert alert-danger w-50">
          @if (resetPassword.get('email')?.getError('required')) {
            <p class="m-0">Email Is Required</p>
          }
          @else if (resetPassword.get('email')?.getError('email')) {<p class="m-0">Enter Valid Email </p>}
        </div>
      }
    </div>

    <div class="my-2">
      <label for="new">New Password </label>
      <input [ngClass]="{
        'is-valid':!resetPassword.get('newPassword')?.errors && (resetPassword.get('newPassword')?.touched || resetPassword.get('newPassword')?.dirty),
        'is-invalid': resetPassword.get('newPassword')?.errors && (resetPassword.get('newPassword')?.touched || resetPassword.get('newPassword')?.dirty),
      }"
      formControlName="newPassword" type="password" id="new" class="form-control" />
      @if (resetPassword.get('newPassword')?.errors && (resetPassword.get('newPassword')?.touched || resetPassword.get('newPassword')?.dirty)) {
        <div class="alert alert-danger w-50">
          @if (resetPassword.get('newPassword')?.getError('required')) {
            <p class="m-0">newPassword Is Required</p>
          }
          @else if (resetPassword.get('newPassword')?.getError('pattern')) {<p class="m-0">Enter Valid Password </p>}
        </div>
      }
    </div>
    <button [disabled]="resetPassword.invalid" class="btn-main">Rest passwoerd
      @if (isLoading) {
        <span><i class="fa fa-spinner fa-spin"></i></span>
      }
    </button>
  </form>
}

</section>
