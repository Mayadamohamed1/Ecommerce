import{a as D}from"./chunk-ZLV4HNE7.js";import{a as I}from"./chunk-CW5AHXJI.js";import{l as L}from"./chunk-IQZ7LQEQ.js";import{a as k}from"./chunk-3CY3LVCV.js";import"./chunk-CNHRRE5V.js";import{Ca as b,Ea as f,Fa as x,I as m,K as g,Na as l,Oa as p,Pa as T,R as h,S as u,Ua as W,Va as y,_a as E,aa as S,ab as F,ca as a,pa as w,ua as C,va as _,wa as v,xa as r,ya as o,za as d}from"./chunk-QGTKXM7V.js";var P=(s,i)=>i._id,V=()=>[1,2,3,4,5];function $(s,i){s&1&&(r(0,"span"),d(1,"i",13),o())}function j(s,i){if(s&1){let n=b();r(0,"div",2)(1,"div",3)(2,"div"),d(3,"img",4),r(4,"h6",5),l(5),o(),r(6,"h5",6),l(7),E(8,"termText"),o(),r(9,"div",7)(10,"span"),l(11),o(),r(12,"div",8),_(13,$,2,0,"span",null,C),r(15,"span",9),l(16),o()()()(),r(17,"div",7)(18,"button",10),f("click",function(){let e=h(n).$implicit,c=x();return u(c.addCart(e._id))}),l(19," Add To Cart"),o(),r(20,"button",11),f("click",function(){let e=h(n).$implicit,c=x();return u(c.removeItem(e._id))}),d(21,"i",12),o()()()()}if(s&2){let n=i.$implicit;a(3),w("src",n.imageCover,S)("alt",n.title),a(2),p(n.category.name),a(2),p(F(8,6,n.title,2)),a(4),T("",n.price," EGP"),a(2),v(y(9,V).slice(0,n.ratingsAverage)),a(3),p(n.ratingsAverage)}}var O=(()=>{let i=class i{constructor(){this._WishlistService=m(D),this._CartService=m(k),this._ToastrService=m(L),this.wishDetalis=[]}ngOnInit(){this._WishlistService.getProdWishList().subscribe({next:t=>{console.log(t.data),this.wishDetalis=t.data,this._WishlistService.updateWishCount(t.count)},error:t=>{console.log(t)}})}removeItem(t){this._WishlistService.deleteSpecifWishList(t).subscribe({next:e=>{console.log("Response received:",e),this.wishDetalis=this.wishDetalis.filter(c=>e.data.includes(c._id)),console.log("Updated wish list after filtering:",this.wishDetalis),this._ToastrService.success(e.message),this._WishlistService.updateWishCount(e.count)},error:e=>{console.log(e),this._ToastrService.error("Failed to remove item","Error")}})}addCart(t){this._CartService.addProdToCart(t).subscribe({next:e=>{console.log(e),this._ToastrService.success(e.message,"FreshCart")},error:e=>{console.log(e)}})}};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=g({type:i,selectors:[["app-wish-list"]],standalone:!0,features:[W],decls:4,vars:0,consts:[[1,"bg-main-light","rounded-4","p-4","my-2","shadow","w-75","mx-auto"],[1,"row","gy-3"],[1,"col-md-4"],[1,"product","p-2"],[1,"w-100",3,"src","alt"],[1,"text-main","small"],[1,"fw-bold"],[1,"d-flex","justify-content-between","align-items-center"],[1,"d-flex","justify-content-between"],[1,"text-muted"],[1,"btn","bg-main","text-white","my-2",3,"click"],[1,"text-danger","btn","p-0","border-0",3,"click"],[1,"fa-solid","fa-trash","fa-2x"],[1,"fa-solid","fa-star","rating-color"]],template:function(e,c){e&1&&(r(0,"section",0)(1,"div",1),_(2,j,22,10,"div",2,P),o()()),e&2&&(a(2),v(c.wishDetalis))},dependencies:[I]});let s=i;return s})();export{O as WishListComponent};
