import{b as V}from"./chunk-LDM4CUVJ.js";import{a as F,b as _,c as N,d as A,h as R,i as k,j as q,k as D,m as I}from"./chunk-AAXMUW5Q.js";import"./chunk-CNHRRE5V.js";import{Ab as x,Bb as b,Ea as w,Fa as G,I as h,K as E,Na as u,Oa as y,Ua as L,Xa as S,ca as s,ib as T,na as d,pa as C,ta as p,xa as o,ya as i,za as v}from"./chunk-QGTKXM7V.js";var B=(e,n)=>({"is-valid":e,"is-invalid":n});function M(e,n){e&1&&(o(0,"p",14),u(1,"Email Is Required"),i())}function j(e,n){e&1&&(o(0,"p",14),u(1,"Enter Valid Email "),i())}function U(e,n){if(e&1&&(o(0,"div",6),d(1,M,2,0,"p",14)(2,j,2,0),i()),e&2){let m,l=G();s(),p(1,(m=l.loginGroup.get("email"))!=null&&m.getError("required")?1:(m=l.loginGroup.get("email"))!=null&&m.getError("email")?2:-1)}}function $(e,n){e&1&&(o(0,"p",14),u(1,"password Is Required"),i())}function z(e,n){e&1&&(o(0,"p",14),u(1,"password must start with upperCase then from 6 to more any chars "),i())}function H(e,n){if(e&1&&(o(0,"div",6),d(1,$,2,0,"p",14)(2,z,2,0),i()),e&2){let m,l=G();s(),p(1,(m=l.loginGroup.get("password"))!=null&&m.getError("required")?1:(m=l.loginGroup.get("password"))!=null&&m.getError("pattern")?2:-1)}}function J(e,n){e&1&&(o(0,"span"),v(1,"i",15),i())}function K(e,n){if(e&1&&(o(0,"p",12),u(1),i()),e&2){let m=G();s(),y(m.msgError)}}function O(e,n){e&1&&(o(0,"p",13),u(1,"Success...waiting 2s"),i())}var ie=(()=>{let n=class n{constructor(){this._AuthService=h(V),this._FormBuilder=h(D),this._Router=h(x),this.msgError="",this.isLoading=!1,this.msgSuccess=!1,this.loginGroup=this._FormBuilder.group({email:[null,[_.required,_.email]],password:[null,[_.required,_.pattern(/^\w{6,}$/)]]})}regiterSubmit(){this.loginGroup.valid?(this.isLoading=!0,this._AuthService.setloginForm(this.loginGroup.value).subscribe({next:l=>{console.log(l),l.message=="success"&&(this.msgSuccess=!0,setTimeout(()=>{localStorage.setItem("uToken",l.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"])},2e3)),this.isLoading=!1},error:l=>{this.msgError=l.error.message,console.log(l),this.isLoading=!1}})):(this.loginGroup.setErrors({mismatch:!0}),this.loginGroup.markAllAsTouched())}};n.\u0275fac=function(f){return new(f||n)},n.\u0275cmp=E({type:n,selectors:[["app-login"]],standalone:!0,features:[L],decls:22,vars:14,consts:[[1,"bg-main-light","shadow","p-3","my-3","rounded-4"],[1,"h2","text-main"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","email"],["id","email","type","email","formControlName","email",1,"form-control",3,"ngClass"],[1,"alert","alert-danger","w-50"],["for","pass"],["id","pass","type","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"d-flex","align-items-center","justify-content-end","gap-4"],["routerLink","/forgot",1,"link-primary"],[1,"btn-main"],[1,"alert","alert-danger"],[1,"text-center","my-2","alert","alert-success"],[1,"m-0"],[1,"fa","fa-spinner","fa-spin"]],template:function(f,t){if(f&1&&(o(0,"section",0)(1,"h1",1),u(2,"login Now:"),i(),o(3,"form",2),w("ngSubmit",function(){return t.regiterSubmit()}),o(4,"div",3)(5,"label",4),u(6,"email"),i(),v(7,"input",5),d(8,U,3,1,"div",6),i(),o(9,"div",3)(10,"label",7),u(11,"password"),i(),v(12,"input",8),d(13,H,3,1,"div",6),i(),o(14,"div",9)(15,"a",10),u(16,"Forgot password?"),i(),o(17,"button",11),u(18,"login "),d(19,J,2,0,"span"),i()(),d(20,K,2,1,"p",12)(21,O,2,0,"p",13),i()()),f&2){let r,g,a,c;s(3),C("formGroup",t.loginGroup),s(4),C("ngClass",S(8,B,!((r=t.loginGroup.get("email"))!=null&&r.errors)&&(((r=t.loginGroup.get("email"))==null?null:r.touched)||((r=t.loginGroup.get("email"))==null?null:r.dirty)),((r=t.loginGroup.get("email"))==null?null:r.errors)&&(((r=t.loginGroup.get("email"))==null?null:r.touched)||((r=t.loginGroup.get("email"))==null?null:r.dirty)))),s(),p(8,(g=t.loginGroup.get("email"))!=null&&g.errors&&((g=t.loginGroup.get("email"))!=null&&g.touched||(g=t.loginGroup.get("email"))!=null&&g.dirty)?8:-1),s(4),C("ngClass",S(11,B,!((a=t.loginGroup.get("password"))!=null&&a.errors)&&(((a=t.loginGroup.get("password"))==null?null:a.touched)||((a=t.loginGroup.get("password"))==null?null:a.dirty)),((a=t.loginGroup.get("password"))==null?null:a.errors)&&(((a=t.loginGroup.get("password"))==null?null:a.touched)||((a=t.loginGroup.get("password"))==null?null:a.dirty)))),s(),p(13,(c=t.loginGroup.get("password"))!=null&&c.errors&&((c=t.loginGroup.get("password"))!=null&&c.touched||(c=t.loginGroup.get("password"))!=null&&c.dirty)?13:-1),s(6),p(19,t.isLoading?19:-1),s(),p(20,t.msgError?20:-1),s(),p(21,t.msgSuccess?21:-1)}},dependencies:[T,I,R,F,N,A,k,q,b]});let e=n;return e})();export{ie as LoginComponent};
