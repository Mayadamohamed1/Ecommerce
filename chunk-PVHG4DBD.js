import{b as I}from"./chunk-LDM4CUVJ.js";import{a as q,b as C,c as N,d as L,e as P,f as w,h as R,i as G,j as A,m as D}from"./chunk-AAXMUW5Q.js";import"./chunk-CNHRRE5V.js";import{Ab as V,Ca as y,Ea as E,Fa as _,I as S,K as F,Na as d,R as v,S as x,Ua as b,Xa as f,ca as s,ib as T,na as m,pa as p,ta as u,xa as l,ya as o,za as g}from"./chunk-QGTKXM7V.js";var h=(n,r)=>({"is-valid":n,"is-invalid":r});function M(n,r){n&1&&(l(0,"p",8),d(1,"Email Is Required"),o())}function k(n,r){n&1&&(l(0,"p",8),d(1,"Enter Valid Email "),o())}function $(n,r){if(n&1&&(l(0,"div",6),m(1,M,2,0,"p",8)(2,k,2,0),o()),n&2){let e,i=_(2);s(),u(1,(e=i.verifyEmail.get("email"))!=null&&e.getError("required")?1:(e=i.verifyEmail.get("email"))!=null&&e.getError("email")?2:-1)}}function j(n,r){n&1&&(l(0,"span"),g(1,"i",9),o())}function U(n,r){if(n&1){let e=y();l(0,"form",2),E("ngSubmit",function(){v(e);let t=_();return x(t.step1())}),l(1,"div",3)(2,"label",4),d(3,"Email "),o(),g(4,"input",5),m(5,$,3,1,"div",6),o(),l(6,"button",7),d(7,"Verify Email "),m(8,j,2,0,"span"),o()()}if(n&2){let e,i,t=_();p("formGroup",t.verifyEmail),s(4),p("ngClass",f(5,h,!((e=t.verifyEmail.get("email"))!=null&&e.errors)&&(((e=t.verifyEmail.get("email"))==null?null:e.touched)||((e=t.verifyEmail.get("email"))==null?null:e.dirty)),((e=t.verifyEmail.get("email"))==null?null:e.errors)&&(((e=t.verifyEmail.get("email"))==null?null:e.touched)||((e=t.verifyEmail.get("email"))==null?null:e.dirty)))),s(),u(5,(i=t.verifyEmail.get("email"))!=null&&i.errors&&((i=t.verifyEmail.get("email"))!=null&&i.touched||(i=t.verifyEmail.get("email"))!=null&&i.dirty)?5:-1),s(),p("disabled",t.verifyEmail.invalid),s(2),u(8,t.isLoading?8:-1)}}function z(n,r){n&1&&(l(0,"p",8),d(1,"Email Is Required"),o())}function B(n,r){n&1&&(l(0,"p",8),d(1,"Enter Valid code "),o())}function H(n,r){if(n&1&&(l(0,"div",6),m(1,z,2,0,"p",8)(2,B,2,0),o()),n&2){let e,i=_(2);s(),u(1,(e=i.verifyCode.get("resetCode"))!=null&&e.getError("required")?1:(e=i.verifyCode.get("resetCode"))!=null&&e.getError("pattern")?2:-1)}}function J(n,r){n&1&&(l(0,"span"),g(1,"i",9),o())}function K(n,r){if(n&1){let e=y();l(0,"form",2),E("ngSubmit",function(){v(e);let t=_();return x(t.step2())}),l(1,"div",3)(2,"label",10),d(3,"reset Code "),o(),g(4,"input",11),m(5,H,3,1,"div",6),o(),l(6,"button",7),d(7,"Verify code "),m(8,J,2,0,"span"),o()()}if(n&2){let e,i,t=_();p("formGroup",t.verifyCode),s(4),p("ngClass",f(5,h,!((e=t.verifyCode.get("resetCode"))!=null&&e.errors)&&(((e=t.verifyCode.get("resetCode"))==null?null:e.touched)||((e=t.verifyCode.get("resetCode"))==null?null:e.dirty)),((e=t.verifyCode.get("resetCode"))==null?null:e.errors)&&(((e=t.verifyCode.get("resetCode"))==null?null:e.touched)||((e=t.verifyCode.get("resetCode"))==null?null:e.dirty)))),s(),u(5,(i=t.verifyCode.get("resetCode"))!=null&&i.errors&&((i=t.verifyCode.get("resetCode"))!=null&&i.touched||(i=t.verifyCode.get("resetCode"))!=null&&i.dirty)?5:-1),s(),p("disabled",t.verifyCode.invalid),s(2),u(8,t.isLoading?8:-1)}}function O(n,r){n&1&&(l(0,"p",8),d(1,"Email Is Required"),o())}function Q(n,r){n&1&&(l(0,"p",8),d(1,"Enter Valid Email "),o())}function W(n,r){if(n&1&&(l(0,"div",6),m(1,O,2,0,"p",8)(2,Q,2,0),o()),n&2){let e,i=_(2);s(),u(1,(e=i.resetPassword.get("email"))!=null&&e.getError("required")?1:(e=i.resetPassword.get("email"))!=null&&e.getError("email")?2:-1)}}function X(n,r){n&1&&(l(0,"p",8),d(1,"newPassword Is Required"),o())}function Y(n,r){n&1&&(l(0,"p",8),d(1,"Enter Valid Password "),o())}function Z(n,r){if(n&1&&(l(0,"div",6),m(1,X,2,0,"p",8)(2,Y,2,0),o()),n&2){let e,i=_(2);s(),u(1,(e=i.resetPassword.get("newPassword"))!=null&&e.getError("required")?1:(e=i.resetPassword.get("newPassword"))!=null&&e.getError("pattern")?2:-1)}}function ee(n,r){n&1&&(l(0,"span"),g(1,"i",9),o())}function te(n,r){if(n&1){let e=y();l(0,"form",2),E("ngSubmit",function(){v(e);let t=_();return x(t.step3())}),l(1,"div",3)(2,"label",4),d(3,"Email "),o(),g(4,"input",12),m(5,W,3,1,"div",6),o(),l(6,"div",3)(7,"label",13),d(8,"New Password "),o(),g(9,"input",14),m(10,Z,3,1,"div",6),o(),l(11,"button",7),d(12,"Rest passwoerd "),m(13,ee,2,0,"span"),o()()}if(n&2){let e,i,t,c,a=_();p("formGroup",a.resetPassword),s(4),p("ngClass",f(7,h,!((e=a.resetPassword.get("email"))!=null&&e.errors)&&(((e=a.resetPassword.get("email"))==null?null:e.touched)||((e=a.resetPassword.get("email"))==null?null:e.dirty)),((e=a.resetPassword.get("email"))==null?null:e.errors)&&(((e=a.resetPassword.get("email"))==null?null:e.touched)||((e=a.resetPassword.get("email"))==null?null:e.dirty)))),s(),u(5,(i=a.resetPassword.get("email"))!=null&&i.errors&&((i=a.resetPassword.get("email"))!=null&&i.touched||(i=a.resetPassword.get("email"))!=null&&i.dirty)?5:-1),s(4),p("ngClass",f(10,h,!((t=a.resetPassword.get("newPassword"))!=null&&t.errors)&&(((t=a.resetPassword.get("newPassword"))==null?null:t.touched)||((t=a.resetPassword.get("newPassword"))==null?null:t.dirty)),((t=a.resetPassword.get("newPassword"))==null?null:t.errors)&&(((t=a.resetPassword.get("newPassword"))==null?null:t.touched)||((t=a.resetPassword.get("newPassword"))==null?null:t.dirty)))),s(),u(10,(c=a.resetPassword.get("newPassword"))!=null&&c.errors&&((c=a.resetPassword.get("newPassword"))!=null&&c.touched||(c=a.resetPassword.get("newPassword"))!=null&&c.dirty)?10:-1),s(),p("disabled",a.resetPassword.invalid),s(2),u(13,a.isLoading?13:-1)}}var me=(()=>{let r=class r{constructor(){this._AuthService=S(I),this._Router=S(V),this.isLoading=!1,this.step=1,this.verifyEmail=new P({email:new w(null,[C.required,C.email])}),this.verifyCode=new P({resetCode:new w(null,[C.required,C.pattern(/^[0-9]{6}$/)])}),this.resetPassword=new P({email:new w(null,[C.required,C.email]),newPassword:new w(null,[C.required,C.pattern(/^\w{6,}$/)])})}step1(){let i=this.verifyEmail.get("email")?.value;this.resetPassword.get("email")?.patchValue(i),this.isLoading=!0,this._AuthService.setEmailVerify(this.verifyEmail.value).subscribe({next:t=>{console.log(t),t.statusMsg==="success"&&(this.step=2),this.isLoading=!1},error:t=>{console.log(t)}})}step2(){this.isLoading=!0,this._AuthService.setCodeVerify(this.verifyCode.value).subscribe({next:i=>{console.log(i),i.status==="Success"&&(this.step=3),this.isLoading=!1},error:i=>{console.log(i)}})}step3(){this.isLoading=!0,this._AuthService.setResetPass(this.resetPassword.value).subscribe({next:i=>{console.log(i),localStorage.setItem("uToken",i.token),this.isLoading=!1,this._AuthService.saveUserData(),this._Router.navigate(["/home"])},error:i=>{console.log(i)}})}};r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=F({type:r,selectors:[["app-forgot-password"]],standalone:!0,features:[b],decls:6,vars:1,consts:[[1,"text-main","text-center","my-2"],[1,"bg-main-light","p-3","shadow","rounded-4",3,"formGroup"],[1,"bg-main-light","p-3","shadow","rounded-4",3,"ngSubmit","formGroup"],[1,"my-2"],["for","email"],["formControlName","email","type","email","id","email",1,"form-control",3,"ngClass"],[1,"alert","alert-danger","w-50"],[1,"btn-main",3,"disabled"],[1,"m-0"],[1,"fa","fa-spinner","fa-spin"],["for","code"],["formControlName","resetCode","type","text","id","code",1,"form-control",3,"ngClass"],["readonly","","formControlName","email","type","email","id","email",1,"form-control",3,"ngClass"],["for","new"],["formControlName","newPassword","type","password","id","new",1,"form-control",3,"ngClass"]],template:function(t,c){t&1&&(l(0,"section")(1,"h1",0),d(2,"Forget Password"),o(),m(3,U,9,8,"form",1)(4,K,9,8)(5,te,14,13),o()),t&2&&(s(3),u(3,c.step==1?3:c.step==2?4:c.step==3?5:-1))},dependencies:[D,R,q,N,L,G,A,T]});let n=r;return n})();export{me as ForgotPasswordComponent};
